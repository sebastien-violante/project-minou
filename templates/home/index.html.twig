{% extends 'base.html.twig' %}

{% block title %}Hello HomeController!{% endblock %}

{% block body %}
<section class="home">
    <section id="left">
		<h1>Les dernières actualités...</h1>
		<section id="actualité">
		{% for article in articles %}
			<article>
                <div class="article-picture">
                    {# <img class="article-picture-background" src='/pictures/{{article.picture}}'> #}
                </div>
                <h1 class="article-title">{{ article.title }}</h1>
                <p>{{ article.date|date('Y-m-d H:i') }}</p>
                <p class="article-text">{{ article.text}}</p>
			</article>
			<hr>
		{% endfor %}
		</section>
	</section>
    <section id="right">
        <h1>chats</h1>
        <hr>
        {% if app.user %}
            <section class="cats">
                <article class="responsive">
                {% for cat in cats %}
                    <div class="card">
                        <div class="topcard">
                            <p>{{ cat.name }}</p>
                            <a id="isLost" class="js-lost" href="{{ path('catlost', {id: cat.id})}}">
                                {% if cat.islost == false %}
                                    <i class="fa-solid fa-house-chimney"></i>
                                {% else %} 
                                    <i class="fa-solid fa-magnifying-glass"></i>   
                                {% endif %}
                            </a>
                        </div>
                        <img class="cat-picture" src="/pictures/{{ cat.picture }}"</img>
                        <p>{{ cat.details }}</p>
                        
                    </div>
                {% endfor %}   
                </article>
            </section>
        {% else %}
            <a href="{{ path('displaylost')}}">Signaler un chat</a>
        {% endif %}
        <section class="soins">
            <h1>Les conseils des professionnels</h1>
            <hr>
            <div id="buttons">
                <button class="advice">Les soins dès le plus jeune âge</button>
                <button class="advice">Le calendrier des vaccinations</button>
                <button class="advice">Bien choisir son chat persan</button>
                <button class="advice">Comportements à risque</button>
            </div>
        </section>

    </section>  
</section>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        function changeStatus(event) {
            event.preventDefault();
            const url = this.href;
            const icone = this.querySelector('i');
            console.log(icone);
            axios.get(url).then(function(response){
                
                if(icone.classList.contains('fa-magnifying-glass')) {
                    
                    icone.classList.replace('fa-magnifying-glass','fa-house-chimney');
                } else { 
                    
                    icone.classList.replace('fa-house-chimney', 'fa-magnifying-glass');
        }})
            };
        
        document.querySelectorAll('a.js-lost').forEach(function(lost){
            lost.addEventListener('click', changeStatus);
        });
        
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
{% endblock %}

